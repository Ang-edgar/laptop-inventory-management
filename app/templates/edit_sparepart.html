{% extends "base.html" %}
{% block title %}Edit Spare Part{% endblock %}
{% block content %}
<div class="card" style="max-width: 500px; margin: 2rem auto;">
    <div class="card-header">
        <h2>Edit Spare Part</h2>
    </div>
    <div class="card-body">
        <form method="post">
            <div class="form-group">
                <label>Part Type:</label>
                <select name="part_type" id="part_type" onchange="toggleFields()" class="form-control">
                    <option value="Storage" {% if part['part_type'] == 'Storage' %}selected{% endif %}>Storage</option>
                    <option value="RAM" {% if part['part_type'] == 'RAM' %}selected{% endif %}>RAM</option>
                </select>
            </div>
            <div id="storage_fields" class="form-group" style="display:none;">
                <label>Storage Type:</label>
                <select name="storage_type" class="form-control">
                    <option value="">Select</option>
                    <option value="2.5&quot; HDD" {% if part['storage_type'] == '2.5" HDD' %}selected{% endif %}>2.5" HDD</option>
                    <option value="2.5&quot; SSD" {% if part['storage_type'] == '2.5" SSD' %}selected{% endif %}>2.5" SSD</option>
                    <option value="M.2 NVMe" {% if part['storage_type'] == 'M.2 NVMe' %}selected{% endif %}>M.2 NVMe</option>
                    <option value="M.2 SATA" {% if part['storage_type'] == 'M.2 SATA' %}selected{% endif %}>M.2 SATA</option>
                </select>
            </div>
            <div id="ram_fields" class="form-group" style="display:none;">
                <label>RAM Type:</label>
                <select name="ram_type" class="form-control">
                    <option value="">Select</option>
                    <option value="DDR3" {% if part['ram_type'] == 'DDR3' %}selected{% endif %}>DDR3</option>
                    <option value="DDR4" {% if part['ram_type'] == 'DDR4' %}selected{% endif %}>DDR4</option>
                </select>
                <label>RAM Speed:</label>
                <input type="text" name="ram_speed" class="form-control" placeholder="e.g. 1600MHz" value="{{ part['ram_speed'] }}">
            </div>
            <div class="form-group">
                <label>Capacity:</label>
                <input type="text" name="capacity" required class="form-control" placeholder="e.g. 8GB, 256GB" value="{{ part['capacity'] }}">
            </div>
            <div class="form-group">
                <label>Quantity:</label>
                <input type="number" name="quantity" min="1" class="form-control" value="{{ part['quantity'] }}">
            </div>
            <div class="form-group">
                <label for="price">Price ($):</label>
                <input type="number" step="0.01" min="0" class="form-control" id="price" name="price" value="{{ part['price'] or 0 }}">
            </div>
            <div class="form-group">
                <label>Notes:</label>
                <input type="text" name="notes" class="form-control" value="{{ part['notes'] }}">
            </div>
            <button type="submit" class="btn btn-primary" style="width:100%;">Save Changes</button>
        </form>
        <a href="{{ url_for('spareparts') }}" class="btn btn-outline" style="width:100%;margin-top:1rem;">Back to Spare Parts</a>
    </div>
</div>
<script>
    function toggleFields() {
        var partType = document.getElementById('part_type').value;
        document.getElementById('storage_fields').style.display = partType === 'Storage' ? 'block' : 'none';
        document.getElementById('ram_fields').style.display = partType === 'RAM' ? 'block' : 'none';
    }
    window.onload = toggleFields;
</script>
{% endblock %}